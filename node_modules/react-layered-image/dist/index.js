!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports["react-layered-image"]=t(require("react")):e["react-layered-image"]=t(e.react)}(this,(function(e){return n={},t.m=r=[function(t,r){t.exports=e},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LayeredImage=void 0;var n=r(2);Object.defineProperty(t,"LayeredImage",{enumerable:!0,get:function(){return n.LayeredImage}})},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.LayeredImage=void 0;var o,a,i=r(0),s=r(0),u=r(3);(a=o=o||{}).None="NONE",a.Resize="RESIZE",a.Hover="HOVER",a.Active="ACTIVE",t.LayeredImage=function(e){function t(e,t,r,a,i){var s;void 0===e&&(e=N),void 0===i&&(i=!1);var c,l,d=e===o.Resize?{width:l=(c=H.current.container).current.offsetWidth||c.current.clientWidth||c.current.scrollWidth,height:Math.round(l/g)}:T,p=d.width,h=d.height,m=document.documentElement.scrollLeft||document.scrollingElement.scrollLeft||window.scrollX||window.pageXOffset,y=document.documentElement.scrollTop||document.scrollingElement.scrollTop||window.scrollY||window.pageYOffset,v=H.current.container.current.getBoundingClientRect(),b=(r-v.left-m)/p,w=(a-v.top-y)/h,x=r-v.left-m-p/2,E=a-v.top-y-h/2,M=(w-E)/(h/2)*8,O=(x-b)/(p/2)*8,k=.01*(b-x),j=.01*(w-E),I=180*Math.atan2(E,x)/Math.PI-90,P=((s={})[o.None]=C,s[o.Resize]={root:{height:h+"px",transform:"perspective("+3*p+"px)"}},s[o.Hover]={container:{transform:"rotateX("+-u.clamp(M,-8,8)+"deg)\n                      rotateY("+-u.clamp(O,-8,8)+"deg)\n                      translateX("+5*-k+"px)\n                      translateY("+5*-j+"px)\n                      scale(1.1)"},layer:function(e){return{transform:"translateX("+1.4*u.clamp(k,-2,2)*e+"px)\n                      translateY("+1.4*u.clamp(j,-2,2)*e+"px)\n                      scale(1.04)"}},light:{backgroundImage:"linear-gradient("+I+"deg, "+S+" 0%, transparent 80%)"},shadow:{boxShadow:"0 40px 100px "+R+", 0 10px 20px "+R}},s[o.Active]={container:{transitionDuration:"0.075s",transform:"rotateX("+M/1.4+"deg)\n                      rotateY("+O/1.4+"deg)\n                      scale(1)"},layer:function(e){return{transform:"translateX("+-k*e+"px)\n                      translateY("+-j*e+"px)\n                      scale(1.02)"}},light:{backgroundImage:"linear-gradient("+I+"deg, "+S+" 0%, transparent 80%)"},shadow:n(n({},C.shadow),{transitionDuration:"0.075s"})},s[e]);i&&t.preventDefault();for(var _=0,D=Object.entries(P);_<D.length;_++){var Y=D[_];!function(e,t){"layer"===e?f.forEach((function(e,r){return u.applyStyles(H.current.layers[r].current,u.isFunction(t)?t(r):t)})):u.applyStyles(H.current[e].current,t)}(Y[0],Y[1])}L({width:p,height:h}),X(e)}function r(e){return function(r){return t(e,r,r.pageX,r.pageY,!0)}}function a(e){return function(r){return t(e,r,r.touches[0].pageX,r.touches[0].pageY)}}function d(){return t(o.None)}var f=e.layers,p=e.aspectRatio,g=void 0===p?1.6:p,h=e.borderRadius,m=void 0===h?12:h,y=e.transitionDuration,v=void 0===y?.15:y,b=e.transitionTimingFunction,w=void 0===b?"ease-out":b,x=e.lightColor,S=void 0===x?"#fff":x,E=e.lightOpacity,M=void 0===E?.2:E,O=e.shadowColor,R=void 0===O?"#000":O,k=e.shadowOpacity,j=void 0===k?.6:k,I=e.className,P=e.style,_=s.useState({width:0,height:0}),T=_[0],L=_[1],D=s.useState(o.None),N=D[0],X=D[1],Y=s.useState(0),z=Y[0],A=Y[1],F=s.useState(0)[1],H=s.useRef({root:s.createRef(),container:s.createRef(),layers:f.map((function(){return s.createRef()})),shadow:s.createRef(),light:s.createRef()}),C=s.useMemo((function(){return c(v,S,R)}),[v,S,R]),W=s.useMemo((function(){return{root:n(n({borderRadius:m},C.root),l.root),container:n(n({borderRadius:m,transitionTimingFunction:w},C.container),l.container),stack:n(n({borderRadius:m},C.stack),l.stack),layer:n(n({transitionTimingFunction:w},C.layer),l.layer),light:n(n({borderRadius:m,opacity:M},C.light),l.light),shadow:n(n({borderRadius:m,opacity:j,transitionTimingFunction:w},C.shadow),l.shadow)}}),[C,m,w,M,j]);return s.useEffect((function(){function e(){return t(o.Resize)}return f.forEach((function(e){var t=new Image;t.src=e,t.onload=function(){return A((function(e){return e+1}))},t.onerror=function(){return F((function(e){return e+1}))}})),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),s.useEffect((function(){t(o.Resize)}),[H.current,g]),i.createElement("div",{onMouseEnter:r(o.Hover),onMouseMove:r(),onMouseDown:r(o.Active),onMouseUp:r(o.Hover),onMouseLeave:d,onTouchStart:a(o.Hover),onTouchMove:a(o.Hover),onTouchEnd:d,className:I,style:n(n({},W.root),P),ref:H.current.root},i.createElement("div",{style:W.container,ref:H.current.container},i.createElement("div",{style:W.shadow,ref:H.current.shadow}),i.createElement("div",{style:W.stack},f.map((function(e,t){return i.createElement("div",{style:n(n({},W.layer),{backgroundImage:"url("+e+")",opacity:z===f.length?1:0}),ref:H.current.layers[t],key:t})}))),i.createElement("div",{style:W.light,ref:H.current.light})))},t.LayeredImage.displayName="LayeredImage";var c=function(e,t,r){return{container:{transform:"none",transitionDuration:e+"s"},layer:{transform:"none",transitionDuration:e+"s, 500ms"},light:{backgroundImage:"linear-gradient(180deg, "+t+" 0%, transparent 80%)"},shadow:{boxShadow:"0 10px 30px "+r+", 0 6px 10px "+r,transitionDuration:e+"s"}}},l={root:{position:"relative",width:"100%",transformStyle:"preserve-3d",cursor:"pointer",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},container:{position:"absolute",width:"100%",height:"100%",transitionProperty:"transform",transformStyle:"preserve-3d"},stack:{position:"absolute",width:"100%",height:"100%",background:"black",transformStyle:"preserve-3d",overflow:"hidden"},layer:{position:"absolute",width:"100%",height:"100%",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundColor:"transparent",backgroundSize:"cover",transitionProperty:"transform, opacity",opacity:0},light:{position:"absolute",width:"100%",height:"100%"},shadow:{position:"absolute",width:"100%",height:"100%",transitionProperty:"transform, box-shadow",transform:"translateZ(-10px) scale(0.95)"}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSafariDesktop=t.isFunction=t.clamp=t.applyStyles=void 0,t.applyStyles=function(e,r){for(var n=0,o=Object.entries(r);n<o.length;n++){var a=o[n];!function(r,n){t.isSafariDesktop()?e.style[r]=n:requestAnimationFrame((function(){e.style[r]=n}))}(a[0],a[1])}},t.clamp=function(e,t,r){var n=r<t?t:r;return null!=e?Math.min(Math.max(e,t),n):e},t.isFunction=function(e){return"function"==typeof e},t.isSafariDesktop=function(){var e=navigator.userAgent,t=navigator.vendor;return/Safari/i.test(e)&&/Apple Computer/.test(t)&&!/Mobi|Android/i.test(e)}}],t.c=n,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)t.d(n,o,function(t){return e[t]}.bind(null,o));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1);function t(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return r[e].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r,n}));
//# sourceMappingURL=index.js.map